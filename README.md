# learning-ebpf-go

learning-ebpf-go ğŸ

A Go-native port and companion to learning-ebpf by Liz Rice â€” implemented using libbpf / cilium/ebpf + BPF CO-RE where relevant.
This repo aims to re-implement (and experiment with) the examples from the book using Go.

# ğŸš€ What is this

- The original learning-ebpf repo contains C-based examples illustrated in the book. 
[GitHub](https://github.com/lizrice/learning-ebpf)
- This repo re-implements many of those examples (currently up through Chapter 2, with ongoing work).
- The goal is not to replace the original, but to provide a Go-idiomatic, libbpf/cilium-ebpf + CO-RE version of those examples.
- Helps Go developers / users experiment with eBPF without diving directly into C.

> This repo is a personal, unofficial companion to learning-ebpf.
Neither Liz Rice nor Isovalent endorse or support this project. Itâ€™s my own work, intended for learning & experimentation.

# ğŸ“¦ Core tools & technologies used here

- **libbpf** â€” for BPF CO-RE, type safety, and kernel-type definitions (via vmlinux.h).
- **cilium/ebpf** â€” the Go library used to load BPF programs, manage maps, ring buffers, and interact with BPF from Go.
- **BPF CO-RE (Compile-Once, Run-Anywhere)** â€” making the BPF programs portable across kernel versions by using BTF-based relocation instead of hard-coded kernel structs.
- Pre-built .o BPF bytecode (auto-generated by bpf2go), so you donâ€™t necessarily need a full C build toolchain if you just want to run the demos.

# ğŸ“š Repository status & whatâ€™s implemented

| Chapter (target)      | Status / Notes |
| ----------- | ----------- |
| Chapter 1 (intro)      | (mostly conceptual, minimal code)       |
| Chapter 2 (â€œHello / basic tracingâ€)   | âœ…         |

# ğŸ› ï¸ How to build & run (for a chapter / example)

Hereâ€™s a quick start guide. Adjust for your OS/kernel, privileges, etc.

    git clone https://github.com/ArchieSpinos/learning-ebpf-go.git
    cd learning-ebpf-go

    # (If you ever modify the BPF C code: rebuild the .o with bpf2go)
    go generate ./...

    # Build the Go loader / runner
    go build ./chapter2/hello_file_ring_buffer

    # Run (root or with CAP_BPF / CAP_SYS_ADMIN)
    sudo ./hello_file_ring_buffer


If everything works, you should see live output of openat() syscalls, filename + PID/comm printed by the Go program.

# âœ… What works / Known limitations
- âœ… Basic tracing of openat using a ring buffer + tracepoint.
- âœ… Cross-kernel portability via CO-RE (as long as your kernel has BTF support).
- âš ï¸ Only the early examples (Chapter 2) are ported so far â€” many of the advanced chapters from the book remain to be ported.
- âš ï¸ You may need a reasonably recent Linux kernel (with BTF/ringbuf support) for full functionality.

# ğŸ™‹ Why this project exists
- To learn eBPF starting from Go â€” avoiding the steeper C curve.
- To explore CO-RE + cilium/ebpf based workflows firsthand.
- To serve as a small â€œcheat-sheet + referenceâ€ for Go + eBPF users who want to test ideas quickly.
- To share with others potentially interested in the same path â€” and gather contributions, feedback, or improvements.

# ğŸ’¡ Acknowledgements & Disclaimer
- This project builds on the ideas and structure of the learning-ebpf book and its original examples.
- All credit for the original examples goes to Liz Rice and the eBPF authors / community.
- This repo is not affiliated with nor endorsed by Liz Rice or Isovalent â€” this is my personal, unofficial work.

# ğŸ’¬ Questions / Contact
Feel free to open an issue or discussion in this repo if you hit problems, have questions, or want to propose improvements or new examples ğŸ™‚